<!-- -*- mode: XML -*- -->
<!-- launch file auto-generated by: kobuki_python_20180323_003.ini -->
<!-- launch file auto-generated on: 23-Mar-2018 -->

<launch>
<!-- load parameters -->
	<arg name="ugv_n" 								default="ugv1" />
	<arg name="tb_base" 							default="kobuki" />
	<arg name="camera_namespace"			default="pgrstereo" />
	<arg name="sync_namespace"				default="sync" />
	<arg name="left_tf_id"						default="/$(arg ugv_n)/hast/stereo_left" />
	<arg name="right_tf_id"						default="/$(arg ugv_n)/hast/stereo_right" />
	<arg name="left_camera_serial"		default="16369047" /> <!-- Determine this using rosrun pointgrey_camera_driver list_cameras.-->
	<arg name="right_camera_serial"		default="16306423" /> <!-- Determine this using rosrun pointgrey_camera_driver list_cameras.-->
	<arg name="left_camera_yaml"			default="$(env HOME)/.ros/camera_info/$(arg left_camera_serial).yaml" />
	<arg name="right_camera_yaml"			default="$(env HOME)/.ros/camera_info/$(arg right_camera_serial).yaml" />

	<group ns="/$(arg ugv_n)/stereo" >
		<rosparam file="$(find hast)/cam_info/ugvn/$(arg ugv_n)_pgr_params.yaml" command="load"/>
	</group>

<!--  set static tfs  -->
	<node ns="$(arg ugv_n)" pkg="tf" type="static_transform_publisher" name="$(arg ugv_n)_Base2StereoCenter" 
		args="0.005240 0.000000 0.233270 -1.57079632679 0 -1.22173047640 
		/$(arg ugv_n)/hast/base_footprint		$(arg ugv_n)/hast/stereo_center 100"/> 
	<node ns="$(arg ugv_n)" pkg="tf" type="static_transform_publisher" name="$(arg ugv_n)_stereo_left_tf" 
		args="-0.072052165 0 0 0 0 0 
		$(arg ugv_n)/hast/stereo_center			$(arg left_tf_id) 100"/> 
	<node ns="$(arg ugv_n)" pkg="tf" type="static_transform_publisher" name="$(arg ugv_n)_stereo_right_tf" 
		args="0.072052165 0 0 0 0 0 
		$(arg ugv_n)/hast/stereo_center			$(arg right_tf_id) 100"/> 

<!--  camera driver  -->
	<group ns="$(arg ugv_n)/$(arg camera_namespace)" >
		<!-- launch left camera -->
		<group ns="left" >
			<node pkg="nodelet" type="nodelet" name="$(arg ugv_n)_left_nodelet_manager" args="manager" />
			<node pkg="nodelet" type="nodelet" name="$(arg ugv_n)_left_nodelet" args="load pointgrey_camera_driver/PointGreyCameraNodelet $(arg ugv_n)_left_nodelet_manager">
				<param name="frame_id"	value="left" />
				<param name="serial"		value="$(arg left_camera_serial)" />
				<rosparam file="$(arg left_camera_yaml)" />
			</node>
			<node pkg="image_proc" type="image_proc" name="$(arg ugv_n)_left_image_proc" />
		</group>

		<!-- launch right camera -->
		<group ns="right" >
			<node pkg="nodelet" type="nodelet" name="$(arg ugv_n)_right_nodelet_manager" args="manager" />
			<node pkg="nodelet" type="nodelet" name="$(arg ugv_n)_right_nodelet" args="load pointgrey_camera_driver/PointGreyCameraNodelet $(arg ugv_n)_right_nodelet_manager">
				<param name="frame_id"	value="right" />
				<param name="serial"		value="$(arg right_camera_serial)" />
				<rosparam file="$(arg right_camera_yaml)" />
			</node>
			<node pkg="image_proc" type="image_proc" name="$(arg ugv_n)_right_image_proc" />
		</group>
	</group>

</launch>